<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Massage Studio Booking</title>
  <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600&family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Montserrat', sans-serif;
      margin: 0;
      padding: 0;
      background: #fff;
      color: #111;
    }

    header {
      background: #000;
      color: #fff;
      text-align: center;
      padding: 1rem;
      font-family: 'Lora', serif;
      font-size: 1.5rem;
      letter-spacing: 2px;
    }

    .container {
      display: flex;
      flex-wrap: wrap;
      padding: 2rem;
      gap: 2rem;
    }

    .calendar-section {
      flex: 2;
      min-width: 300px;
      border: 1px solid #ddd;
      padding: 1rem;
    }

    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      font-weight: 600;
    }

    .calendar-header button {
      background: transparent;
      border: none;
      font-size: 1.2rem;
      cursor: pointer;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 0.5rem;
      text-align: center;
      font-size: 0.8rem;
    }

    .calendar-grid div {
      padding: 0.5rem;
      border: 1px solid #eee;
    }

    .day-name {
      font-weight: 600;
      background: #f8f8f8;
    }

    .date:hover {
      background: #f0f0f0;
      cursor: pointer;
    }

    .selected {
      background: black;
      color: white;
    }

    .empty {
      background: #fafafa;
    }

    .legend {
      margin-top: 1rem;
      display: flex;
      gap: 1rem;
      font-size: 0.8rem;
      flex-wrap: wrap;
    }

    .legend span {
      display: inline-block;
      width: 15px;
      height: 15px;
      margin-right: 5px;
      background: #ccc;
    }

    .staff-avatars {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 1.5rem;
      gap: 0.75rem;
    }

    .staff-avatars h4 {
      font-size: 0.9rem;
      font-weight: 600;
      margin: 0;
      text-align: center;
    }

    .staff-avatars .avatar-list {
      display: flex;
      justify-content: center;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .staff-avatars img {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      border: 2px solid #ddd;
      object-fit: cover;
      cursor: pointer;
      transition: transform 0.2s ease, border-color 0.2s ease;
    }

    .staff-avatars img:hover {
      transform: scale(1.05);
      border-color: #000;
    }

    .booking-section {
      flex: 1;
      min-width: 250px;
      border: 1px solid #ddd;
      padding: 1rem;
      position: sticky;
      top: 1rem;
      align-self: flex-start;
      height: fit-content;
    }

    .booking-section h3 {
      font-size: 1rem;
      margin-bottom: 1rem;
      border-bottom: 1px solid #ccc;
      padding-bottom: 0.5rem;
    }

    .form-group {
      margin-bottom: 1rem;
    }

    select, input {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid #ccc;
      font-family: inherit;
    }

    .next-btn {
      display: block;
      width: 100%;
      padding: 0.75rem;
      background: #000;
      color: #fff;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      margin-top: 1rem;
      transition: background 0.3s ease;
    }

    .next-btn:hover {
      background: #444;
    }

    @media(max-width: 750px) {
      .container {
        flex-direction: column;
        padding: 1rem;
      }

      .calendar-section, .booking-section {
        width: 100%;
        min-width: unset;
        padding: 1rem 0.5rem;
        position: static;
      }

      .calendar-grid {
        gap: 0.25rem;
        font-size: 0.7rem;
      }

      .calendar-grid div {
        padding: 0.4rem 0.2rem;
      }

      .form-group input,
      .form-group select {
        font-size: 0.85rem;
        padding: 0.4rem;
      }

      header {
        font-size: 1.3rem;
        padding: 0.8rem;
      }

      .legend {
        font-size: 0.7rem;
      }
    }
  </style>
</head>
<body>
  <header>
    Spa Downtown
  </header>

  <div class="container">
    <!-- Calendar Section -->
    <div class="calendar-section">
      <div class="calendar-header">
        <button id="prev-month">‹</button>
        <div id="calendar-title"></div>
        <button id="next-month">›</button>
      </div>
      <div class="calendar-grid" id="calendar-grid"></div>

      <div class="legend">
        <div><span style="background:#000;"></span> Selected</div>
        <div><span style="background:#999;"></span> No Availability</div>
      </div>

      <div class="staff-avatars" id="staff-avatars"></div>
    </div>

    <!-- Booking Section -->
    <div class="booking-section">
      <h3>Reservation Details</h3>

      <div class="form-group">
        <label>Full Name / Line ID</label>
        <input type="text" placeholder="Enter your full name">
      </div>

      <div class="form-group">
        <label>Phone Number</label>
        <input type="tel" placeholder="Enter your phone number">
      </div>

      <div class="form-group">
        <label>Email</label>
        <input type="email" placeholder="Enter your email address">
      </div>

      <div class="form-group">
        <label>Appointment Date</label>
        <input type="date">
      </div>

      <div class="form-group">
        <label>Appointment Time</label>
        <input type="time">
      </div>

      <div class="form-group">
        <label>Room</label>
        <select>
          <option selected>Select a room</option>
          <option>Room 1 - Relaxation</option>
          <option>Room 2 - Couples</option>
          <option>Room 3 - Therapy</option>
        </select>
      </div>

      <div class="form-group">
        <label>Preferred Therapist</label>
        <select>
          <option selected>No preference</option>
          <option>Therapist 1</option>
          <option>Therapist 2</option>
          <option>Therapist 3</option>
          <option>Therapist 4</option>
          <option>Therapist 5</option>
        </select>
      </div>

      <div class="form-group">
        <label>Special Requests / Notes</label>
        <input type="text" placeholder="Massage type, allergies, preferences">
      </div>

      <!-- Next button -->
      <button class="next-btn" onclick="goToConfirmation()">Next</button>
    </div>
  </div>

  <script>
    const therapists = [
      { id: 1, name: "Therapist 1", img: "https://i.pravatar.cc/45?img=11" },
      { id: 2, name: "Therapist 2", img: "https://i.pravatar.cc/45?img=10" },
      { id: 3, name: "Therapist 3", img: "https://i.pravatar.cc/45?img=9" },
      { id: 4, name: "Therapist 4", img: "https://i.pravatar.cc/45?img=8" },
      { id: 5, name: "Therapist 5", img: "https://i.pravatar.cc/45?img=7" },
      { id: 6, name: "Therapist 6", img: "https://i.pravatar.cc/45?img=6" },
      { id: 7, name: "Therapist 7", img: "https://i.pravatar.cc/45?img=5" },
      { id: 8, name: "Therapist 8", img: "https://i.pravatar.cc/45?img=4" },
      { id: 9, name: "Therapist 9", img: "https://i.pravatar.cc/45?img=3" },
      { id: 10, name: "Therapist 10", img: "https://i.pravatar.cc/45?img=2" },
      { id: 11, name: "Therapist 11", img: "https://i.pravatar.cc/45?img=1" }
    ];

    const dutySchedule = {
      10: [1, 3],
      15: [2, 5, 6],
      20: [4, 7, 8, 9]
    };

    const monthNames = [
      "January","February","March","April","May","June","July",
      "August","September","October","November","December"
    ];

    let currentDate = new Date();
    let currentMonth = currentDate.getMonth();
    let currentYear = currentDate.getFullYear();

    function renderCalendar(year, month) {
      const calendarTitle = document.getElementById("calendar-title");
      const calendarGrid = document.getElementById("calendar-grid");
      const staffAvatars = document.getElementById("staff-avatars");

      calendarGrid.innerHTML = "";
      staffAvatars.innerHTML = "";

      calendarTitle.textContent = `${monthNames[month]} ${year}`;

      const daysOfWeek = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
      daysOfWeek.forEach(d => {
        const div = document.createElement("div");
        div.textContent = d;
        div.classList.add("day-name");
        calendarGrid.appendChild(div);
      });

      const firstDay = new Date(year, month, 1).getDay();
      const totalDays = new Date(year, month + 1, 0).getDate();

      for (let i = 0; i < firstDay; i++) {
        const blank = document.createElement("div");
        blank.classList.add("empty");
        calendarGrid.appendChild(blank);
      }

      for (let day = 1; day <= totalDays; day++) {
        const dateDiv = document.createElement("div");
        dateDiv.textContent = day;
        dateDiv.classList.add("date");

        if (
          day === currentDate.getDate() &&
          month === currentDate.getMonth() &&
          year === currentDate.getFullYear()
        ) {
          dateDiv.classList.add("selected");
        }

        dateDiv.addEventListener("click", () => {
          document.querySelectorAll(".date.selected").forEach(el => el.classList.remove("selected"));
          dateDiv.classList.add("selected");

          const appointmentInput = document.querySelector('.booking-section input[type="date"]');
          appointmentInput.value = `${year}-${String(month+1).padStart(2,'0')}-${String(day).padStart(2,'0')}`;

          const availableIds = dutySchedule[day] || therapists.map(t => t.id);
          const availableTherapists = therapists.filter(t => availableIds.includes(t.id));

          staffAvatars.innerHTML = `
            <h4>Available Staff for ${monthNames[month]} ${day}</h4>
            <div class="avatar-list">
              ${availableTherapists.map(t => `<img src="${t.img}" alt="${t.name}" title="${t.name}">`).join('')}
            </div>
          `;
        });

        calendarGrid.appendChild(dateDiv);
      }
    }

    // Navigation buttons
    document.getElementById("prev-month").addEventListener("click", () => {
      currentMonth--;
      if (currentMonth < 0) {
        currentMonth = 11;
        currentYear--;
      }
      renderCalendar(currentYear, currentMonth);
    });

    document.getElementById("next-month").addEventListener("click", () => {
      currentMonth++;
      if (currentMonth > 11) {
        currentMonth = 0;
        currentYear++;
      }
      renderCalendar(currentYear, currentMonth);
    });

    renderCalendar(currentYear, currentMonth);

    // Go to confirmation page
    function goToConfirmation() {
      window.location.href = "confirmation.html"; // create this page separately
    }
  </script>
</body>
</html>
